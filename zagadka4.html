<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Platform√≥wka</title>
  <style>
    body {
      margin: 0;
      background: #222;
      color: white;
      font-family: sans-serif;
      overflow: hidden;
    }

    #game {
      position: relative;
      width: 100vw;
      height: 90vh;
      background: linear-gradient(to top, #444, #888);
      overflow: hidden;
    }

    #player, #goal {
      position: absolute;
      width: 40px;
      height: 40px;
      bottom: 0;
      border-radius: 8px;
    }

    #player {
      background: yellow;
      left: 50px;
    }

    #goal {
      background: green;
      right: 50px;
    }

    .bullet {
      position: absolute;
      width: 20px;
      height: 20px;
      background: red;
      border-radius: 50%;
    }

    #controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      padding: 10px;
    }

    button {
      font-size: 1.5em;
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      background: #333;
      color: white;
    }
  </style>
</head>
<body>
  <div id="game">
    <div id="player"></div>
    <div id="goal"></div>
  </div>

  <div id="controls">
    <button id="left">‚¨ÖÔ∏è</button>
    <button id="jump">‚§¥Ô∏è</button>
    <button id="right">‚û°Ô∏è</button>
  </div>

  <script>
    const player = document.getElementById("player");
    const goal = document.getElementById("goal");
    const game = document.getElementById("game");

    let position = { x: 50, y: 0, vx: 0, vy: 0 };
    let onGround = true;
    let keys = { left: false, right: false, jump: false };

    const gravity = 1;
    const speed = 5;
    const jumpPower = 20;

    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft") keys.left = true;
      if (e.key === "ArrowRight") keys.right = true;
      if (e.key === " " || e.key === "ArrowUp") keys.jump = true;
    });

    document.addEventListener("keyup", (e) => {
      if (e.key === "ArrowLeft") keys.left = false;
      if (e.key === "ArrowRight") keys.right = false;
      if (e.key === " " || e.key === "ArrowUp") keys.jump = false;
    });

    document.getElementById("left").addEventListener("touchstart", () => keys.left = true);
    document.getElementById("left").addEventListener("touchend", () => keys.left = false);
    document.getElementById("right").addEventListener("touchstart", () => keys.right = true);
    document.getElementById("right").addEventListener("touchend", () => keys.right = false);
    document.getElementById("jump").addEventListener("touchstart", () => keys.jump = true);
    document.getElementById("jump").addEventListener("touchend", () => keys.jump = false);

    function update() {
      if (keys.left) position.vx = -speed;
      else if (keys.right) position.vx = speed;
      else position.vx = 0;

      if (keys.jump && onGround) {
        position.vy = -jumpPower;
        onGround = false;
      }

      position.vy += gravity;
      position.y += position.vy;
      position.x += position.vx;

      if (position.y >= 0) {
        position.y = 0;
        position.vy = 0;
        onGround = true;
      }

      const maxX = game.clientWidth - player.clientWidth;
      position.x = Math.max(0, Math.min(maxX, position.x));

      player.style.left = `${position.x}px`;
      player.style.bottom = `${position.y}px`;

      const goalRect = goal.getBoundingClientRect();
      const playerRect = player.getBoundingClientRect();
      if (
        playerRect.right > goalRect.left &&
        playerRect.left < goalRect.right &&
        playerRect.bottom > goalRect.top &&
        playerRect.top < goalRect.bottom
      ) {
        alert("üéâ Wygra≈Çe≈õ!");
        location.reload();
      }

      document.querySelectorAll(".bullet").forEach(bullet => {
        const b = bullet.getBoundingClientRect();
        if (
          playerRect.left < b.right &&
          playerRect.right > b.left &&
          playerRect.top < b.bottom &&
          playerRect.bottom > b.top
        ) {
          alert("üí• Trafiony!");
          location.reload();
        }
      });

      requestAnimationFrame(update);
    }

    function spawnBullet() {
      const bullet = document.createElement("div");
      bullet.classList.add("bullet");

      const fromLeft = Math.random() < 0.5;
      bullet.style.top = `${Math.random() * (game.clientHeight - 20)}px`;
      bullet.style.left = fromLeft ? "-20px" : `${game.clientWidth}px`;

      game.appendChild(bullet);

      const speed = 4 + Math.random() * 2;
      function moveBullet() {
        let left = parseFloat(bullet.style.left);
        bullet.style.left = `${left + (fromLeft ? speed : -speed)}px`;

        if (left < -30 || left > game.clientWidth + 30) {
          bullet.remove();
        } else {
          requestAnimationFrame(moveBullet);
        }
      }

      moveBullet();
    }

    setInterval(spawnBullet, 1500);
    update();
  </script>
</body>
</html>
