<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PlatformÃ³wka Scroll</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background: #222;
      overflow: hidden;
    }

    #game {
      position: relative;
      width: 100vw;
      height: 100vh;
      background: url('background.jpg') repeat-x;
      background-size: cover;
    }

    #player {
      position: absolute;
      width: 60px;
      height: 60px;
      bottom: 0;
      left: 100px;
      background: yellow;
      background-image: url('player.png'); /* podmieÅ„ */
      background-size: cover;
      z-index: 10;
    }

    .obstacle {
      position: absolute;
      width: 60px;
      height: 60px;
      bottom: 0;
      background: red;
      background-image: url('spike.png'); /* podmieÅ„ */
      background-size: cover;
    }

    .bullet {
      position: absolute;
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
      z-index: 9;
    }
  </style>
</head>
<body>
  <div id="game">
    <div id="player"></div>
  </div>

  <script>
    const game = document.getElementById("game");
    const player = document.getElementById("player");

    let backgroundPos = 0;
    const scrollSpeed = 2;

    function scrollBackground() {
      backgroundPos -= scrollSpeed;
      game.style.backgroundPositionX = `${backgroundPos}px`;
    }

    function spawnObstacle() {
      const obs = document.createElement("div");
      obs.classList.add("obstacle");
      obs.style.left = `${game.clientWidth}px`;
      game.appendChild(obs);

      function move() {
        const left = parseFloat(obs.style.left);
        obs.style.left = `${left - scrollSpeed}px`;

        const obsRect = obs.getBoundingClientRect();
        const playerRect = player.getBoundingClientRect();

        if (
          playerRect.right > obsRect.left &&
          playerRect.left < obsRect.right &&
          playerRect.bottom > obsRect.top
        ) {
          alert("ðŸ’¥ UderzyÅ‚eÅ› w przeszkodÄ™!");
          location.reload();
        }

        if (left + obs.clientWidth < 0) {
          obs.remove();
        } else {
          requestAnimationFrame(move);
        }
      }

      move();
    }

    function spawnBullet() {
      const bullet = document.createElement("div");
      bullet.classList.add("bullet");

      const fromLeft = Math.random() < 0.5;
      bullet.style.top = `${Math.random() * (game.clientHeight - 40)}px`;
      bullet.style.left = fromLeft ? "-20px" : `${game.clientWidth}px`;

      game.appendChild(bullet);

      const speed = 5 + Math.random() * 3;
      function moveBullet() {
        const current = parseFloat(bullet.style.left);
        bullet.style.left = `${current + (fromLeft ? speed : -speed)}px`;

        const bulletRect = bullet.getBoundingClientRect();
        const playerRect = player.getBoundingClientRect();

        if (
          bulletRect.right > playerRect.left &&
          bulletRect.left < playerRect.right &&
          bulletRect.top < playerRect.bottom &&
          bulletRect.bottom > playerRect.top
        ) {
          alert("ðŸ”« Trafiony pociskiem!");
          location.reload();
        }

        if (current < -30 || current > game.clientWidth + 30) {
          bullet.remove();
        } else {
          requestAnimationFrame(moveBullet);
        }
      }

      moveBullet();
    }

    // GÅ‚Ã³wna pÄ™tla gry
    function gameLoop() {
      scrollBackground();
      requestAnimationFrame(gameLoop);
    }

    gameLoop();
    setInterval(spawnObstacle, 2000);
    setInterval(spawnBullet, 1500);
  </script>
</body>
</html>
